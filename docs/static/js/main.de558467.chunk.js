(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(n,e,t){n.exports=t(32)},32:function(n,e,t){"use strict";t.r(e);var r=t(1),o=t.n(r),a=t(6),i=t.n(a),c=t(2),u=t(3),l=t(8),s=t.n(l),d=t(17),f=t(13),m=t(11),p=t(4),v=t(5);function b(){var n=Object(c.a)(["\n    color: grey;\n    pointer-events: none;\n  "]);return b=function(){return n},n}function g(){var n=Object(c.a)(["\n  /* background: skyblue; */\n  padding: 2px 0;\n  padding-right: 8px;\n  padding-left: 2px;\n  border-radius: 10px;\n  cursor: pointer;\n  transition: background 300ms;\n  &:hover {\n    background: #e8e8e8;\n  }\n\n  > * {\n    vertical-align: middle;\n  }\n  .btn-text {\n    margin-left: 4px;\n  }\n\n  ",";\n"]);return g=function(){return n},n}function h(){var n=Object(c.a)(["\n  display: inline-block;\n  /* background: pink; */\n  padding: 14px 0;\n  margin: 0 14px;\n"]);return h=function(){return n},n}var x=u.c.div(h()),w=u.c.div(g(),function(n){return n.disabled&&Object(u.b)(b())});var k=o.a.memo(function(n){var e=n.Icon,t=void 0===e?function(){return null}:e,r=n.text,a=void 0===r?"":r,i=n.onClick,c=void 0===i?function(n){return n}:i,u=n.disabled,l=void 0!==u&&u;return o.a.createElement(x,null,o.a.createElement(w,{onClick:c,disabled:l},o.a.createElement(t,{size:48}),o.a.createElement("span",{className:"btn-text"},a)))});function E(){var n=Object(c.a)(["\n  width: 56px;\n  height: 56px;\n  position: absolute;\n  z-index: -1;\n  left: 50%;\n  margin-left: -28px;\n  bottom: -28px;\n  background: white;\n  border-radius: 100%;\n  text-align: center;\n  line-height: 56px;\n  cursor: pointer;\n\n  > * {\n    margin-bottom: -20px;\n    transform: rotate(","deg);\n    transition: transform 600ms;\n  }\n"]);return E=function(){return n},n}function O(){var n=Object(c.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  background: white;\n  text-align: center;\n  transform: translateY(",");\n  transition: 600ms;\n\n  > * {\n    vertical-align: middle;\n  }\n"]);return O=function(){return n},n}var j=u.c.div(O(),function(n){return n.open?"0":"-100%"}),y=u.c.div(E(),function(n){return n.open?"0":"-180"});var C=function(n){var e=n.onClickClearBtn,t=void 0===e?function(n){return n}:e,a=n.onClickRedoBtn,i=n.onClickUndoBtn,c=n.onClickSaveBtn,u=n.canRedo,l=void 0!==u&&u,s=n.canUndo,d=void 0!==s&&s,f=Object(r.useState)(!0),m=Object(p.a)(f,2),b=m[0],g=m[1];return o.a.createElement(j,{open:b},o.a.createElement(k,{Icon:v.h,text:"SAVE",onClick:c}),o.a.createElement(k,{Icon:v.d,text:"CLEAR ALL",onClick:t}),o.a.createElement(k,{Icon:v.i,text:"UNDO",onClick:i,disabled:!d}),o.a.createElement(k,{Icon:v.g,text:"REDO",onClick:a,disabled:!l}),o.a.createElement(y,{open:b,onClick:function(){return g(!b)}},o.a.createElement(v.f,{size:24})))};function S(){var n=Object(c.a)(["\n  /* background: pink; */\n  display: inline-flex;\n  align-items: center;\n\n  input {\n    margin: 0 8px 0 16px;\n    border: none;\n    outline: none;\n    height: 100%;\n    text-align: center;\n    font-size: 20px;\n    width: 74px;\n    background: #e8e8e8;\n    border-radius: 24px;\n  }\n\n  span {\n    font-size: 20px;\n  }\n"]);return S=function(){return n},n}var z=u.c.div(S());var I=o.a.memo(function(n){var e=n.size,t=n.setSize,a=n.onCheckSize,i=Object(r.useRef)(null);return Object(r.useEffect)(function(){var n=i.current;n.selectionStart=n.selectionEnd=n.value.length}),o.a.createElement(z,null,o.a.createElement("span",null,"SIZE:"),o.a.createElement("input",{type:"text",ref:i,value:e,onChange:function(n){return t(n.target.value)},onBlur:a,onKeyPress:function(n){"Enter"===n.key&&a()},onKeyDown:function(n){if(!isNaN(e))return 38===n.keyCode?t(Number(e)+1):40===n.keyCode?t(Number(e)-1):void 0}}),o.a.createElement("span",null,"px"))});function D(){var n=Object(c.a)(["\n  width: 48px;\n  height: 48px;\n  border: solid 2px;\n  background: ",";\n  border-color: ",";\n  border-radius: 50%;\n  margin-right: 8px;\n  &:last-child {\n    margin-right: 0;\n  }\n  text-align: center;\n  line-height: 48px;\n  color: ",";\n  cursor: pointer;\n"]);return D=function(){return n},n}var L=u.c.div(D(),function(n){return n.color},function(n){var e=n.color;return"#fff"===e||"#ffffff"===e||"white"===e?"#000":e},function(n){var e=n.color;return"#000"===e||"#000000"===e||"black"===e?"#fff":"#000"});var R=function(n){var e=n.select,t=void 0!==e&&e,r=n.color,a=void 0===r?"#fff":r,i=n.onClick,c=void 0===i?function(n){return n}:i;return o.a.createElement(L,{color:a,onClick:c},t&&o.a.createElement(v.c,null))};function U(){var n=Object(c.a)(["\n  /* background: pink; */\n  display: inline-flex;\n  align-items: center;\n  font-size: 20px;\n  span {\n    margin-right: 16px;\n  }\n"]);return U=function(){return n},n}var M=u.c.div(U());var N=function(n){var e=n.color,t=n.setColor;return o.a.createElement(M,null,o.a.createElement("span",null,"COLOR:"),["#ffffff","#000000","#9BFFCD","#00CC99","#01936F"].map(function(n,r){return o.a.createElement(R,{select:n===e,color:n,key:r,onClick:function(){return t(n)}})}))};function _(){var n=Object(c.a)(["\n  position: fixed;\n  z-index: 0;\n  width: 56px;\n  height: 56px;\n  left: 50%;\n  margin-left: -28px;\n\n  bottom: ",";\n  @media (max-width: 888px) {\n    bottom: ",";\n  }\n\n  margin-bottom: -28px;\n  background: white;\n  border-radius: 100%;\n  text-align: center;\n  line-height: 56px;\n  cursor: pointer;\n  transition: all 600ms;\n  box-shadow: 0px 4px 16px rgba(0, 0, 0, 0.16);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  > * {\n    transition: all 600ms;\n    line-height: 56px;\n  }\n\n  .arrow-down-icon {\n    position: relative;\n    top: ",";\n    opacity: ",";\n  }\n\n  .brush-icon {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    opacity: ",";\n  }\n"]);return _=function(){return n},n}var B=u.c.div(_(),function(n){return n.open?"120px":"68px"},function(n){return n.open?"241px":"68px"},function(n){return n.open?"-10px":"0px"},function(n){return n.open?"1":"0"},function(n){return n.open?"0":"1"}),F=function(n){var e=n.onClick,t=void 0===e?function(n){return n}:e,r=n.open,a=void 0===r||r;return o.a.createElement(B,{onClick:t,open:a},o.a.createElement(v.e,{size:24,className:"arrow-down-icon"}),o.a.createElement(v.b,{size:24,className:"brush-icon"}))},A=t(16);function Y(){var n=Object(c.a)(["\n  display: inline-flex;\n  /* background: grey; */\n  height: auto !important;\n  white-space: nowrap;\n\n  > * {\n    margin-left: 10px;\n    padding: 2px;\n    border-radius: 10px;\n    &:first-child {\n      margin-left: 0;\n    }\n\n    &:hover {\n      background: #e8e8e8;\n    }\n\n    /* background: ","; */\n    cursor: pointer;\n    &.select {\n      background: lightgray;\n    }\n  }\n"]);return Y=function(){return n},n}var P=u.c.div(Y(),function(n){return n.select?"grey":"pink"}),X=function(n){var e=n.mode,t=n.setMode;return o.a.createElement(P,null,[{Icon:v.b,modeName:"mode_draw"},{Icon:A.a,modeName:"mode_eraser"},{Icon:v.a,modeName:"mode_window"}].map(function(n){var r=n.Icon,a=n.modeName;return o.a.createElement(r,{key:a,size:52,className:"".concat(a===e?"select":""),onClick:function(){return t(a)}})}))};function J(){var n=Object(c.a)(["\n  position: fixed;\n  z-index: 1;\n  bottom: 40px;\n  left: 50%;\n  transform: ",";\n  transition: transform 600ms;\n  background: white;\n  box-shadow: 0px 4px 16px rgba(0, 0, 0, 0.16);\n  border-radius: 50px;\n  padding: 16px 40px;\n  white-space: nowrap;\n\n  > * {\n    height: 48px;\n    vertical-align: middle;\n    &:nth-child(n + 2) {\n      margin-left: 40px;\n    }\n  }\n\n  @media (max-width: 888px) {\n    white-space: pre-wrap;\n    padding: 16px 24px;\n\n    > * {\n      display: flex;\n\n      &:nth-child(n + 2) {\n        margin-left: 0px;\n        margin-top: 10px;\n      }\n    }\n  }\n"]);return J=function(){return n},n}var T=u.c.div(J(),function(n){return n.open?"translate(-50%, 0)":"translate(-50%, calc(100% + 40px))"});var q=function(n){var e=n.size,t=n.setSize,a=n.onCheckSize,i=n.color,c=n.setColor,u=n.mode,l=n.setMode,s=Object(r.useState)(!0),d=Object(p.a)(s,2),f=d[0],m=d[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(T,{open:f},o.a.createElement(X,{mode:u,setMode:l}),o.a.createElement(I,{size:e,onCheckSize:a,setSize:t}),o.a.createElement(N,{color:i,setColor:c})),o.a.createElement(F,{open:f,onClick:function(){return m(!f)}}))};function W(){var n=Object(c.a)(["\n  border: dashed 3px blue;\n  position: absolute;\n  background: rgba(0, 0, 255, 0.1);\n  cursor: move;\n"]);return W=function(){return n},n}function K(){var n=Object(c.a)(["\n  width: 100%;\n  height: 100%;\n  background: #e8e8e8;\n  cursor: none;\n"]);return K=function(){return n},n}var V="#e8e8e8",Z=u.c.canvas(K()),G=u.c.div(W()),H=function(n){return new Promise(function(e,t){var r=new Image;r.src=n,r.onload=function(){e(r)},r.onerror=t})},Q=function(){var n=null,e=null,t=null,r=!0,o="mode_draw",a=-100,i=-100,c="#000",u=10,l=null;function s(){var e=n.getBoundingClientRect(),t=e.width,r=e.height;n.width=t,n.height=r}function d(){return"mode_draw"===o?(e.beginPath(),e.strokeStyle=c,e.lineWidth=u,e.lineJoin="round",e.lineCap="round",e.moveTo(a,i),e.lineTo(a,i),void e.stroke()):"mode_eraser"===o?(e.beginPath(),e.arc(a,i,u/2,0,2*Math.PI),e.fillStyle="whitesmoke",e.fill(),void e.closePath()):void 0}function f(){if(!r)return cancelAnimationFrame(l),void(l=requestAnimationFrame(f));if(t){var o=new Image;o.src=t,o.onload=function(){s(),e.drawImage(o,0,0),d(),cancelAnimationFrame(l),l=requestAnimationFrame(f)}}else s(),e.fillStyle=V,e.fillRect(0,0,n.width,n.height),d(),cancelAnimationFrame(l),l=requestAnimationFrame(f)}return{init:function(t){e=(n=t).getContext("2d"),f()},setCursor:function(n,e){a=n,i=e},setSpec:function(n){c=n.color,u=n.size,o=n.mode},setDataImg:function(n){t=n},getDataImg:function(){return t},stopUpdate:function(){r=!1},startUpdate:function(){r=!0}}}();function $(n){var e=n.canvas,t=e.getContext("2d");t.fillStyle=V,t.fillRect(0,0,e.width,e.height)}var nn=function(){var n=null;return function(e){if(null===n)return n=e;var t=parseInt(e,10);return isNaN(t)?n:n=t<1?1:t}}(),en=0,tn=0,rn=document.createElement("canvas"),on=document.createElement("canvas"),an=rn.getContext("2d"),cn=on.getContext("2d"),un=function(){var n=Object(r.useRef)(null),e=Object(r.useRef)(null),t=Object(r.useState)(!1),a=Object(p.a)(t,2),i=a[0],c=a[1],u=Object(r.useState)(20),l=Object(p.a)(u,2),v=l[0],b=l[1],g=Object(r.useState)("#000000"),h=Object(p.a)(g,2),x=h[0],w=h[1],k=Object(r.useState)([]),E=Object(p.a)(k,2),O=E[0],j=E[1],y=Object(r.useState)(-1),S=Object(p.a)(y,2),z=S[0],I=S[1],D=Object(r.useState)("mode_draw"),L=Object(p.a)(D,2),R=L[0],U=L[1],M=Object(r.useState)(null),N=Object(p.a)(M,2),_=N[0],B=N[1],F=Object(r.useState)({x:0,y:0,h:0,w:0}),A=Object(p.a)(F,2),Y=A[0],P=A[1],X=Object(r.useState)(!1),J=Object(p.a)(X,2),T=J[0],W=J[1],K=Object(r.useState)(!1),un=Object(p.a)(K,2),ln=un[0],sn=un[1],dn=Object(r.useState)(!1),fn=Object(p.a)(dn,2),mn=fn[0],pn=fn[1],vn=O.length>z+1,bn=z>-1,gn={cursor:"mode_window"===R?"crosshair":"none"},hn={left:Y.x,top:Y.y,width:Y.w,height:Y.h,display:T?"block":"none"};function xn(){return(xn=Object(f.a)(s.a.mark(function e(t){var r,o,a,i,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=O[z]){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,H(r);case 5:return o=e.sent,a=n.current,rn.width=a.width,rn.height=a.height,an.drawImage(o,0,0),i=an.getImageData(_.x,_.y,_.w,_.h),on.width=_.w,on.height=_.h,cn.putImageData(i,0,0),e.next=16,H(on.toDataURL());case 16:c=e.sent,an.clearRect(_.x,_.y,_.w,_.h),an.drawImage(c,0,0,_.w,_.h,t.x,t.y,t.w,t.h),Q.setDataImg(rn.toDataURL());case 20:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function wn(n){var e=O.slice(0,z+1);j([].concat(Object(d.a)(e),[n])),I(z+1)}return Object(r.useEffect)(function(){Q.setSpec({size:v,color:x,mode:R}),Q.init(n.current)},[]),Object(r.useEffect)(function(){Q.setSpec({size:v,color:x,mode:R})},[v,x,R]),Object(r.useEffect)(function(){W(!1)},[R]),Object(r.useEffect)(function(){function n(n){if(ln){var e=Math.min(Y.x,n.clientX),t=Math.min(Y.y,n.clientY),r=Math.abs(Y.x-n.clientX),o=Math.abs(Y.y-n.clientY);P({x:e,y:t,w:r,h:o}),W(!0)}}function e(){ln&&sn(!1)}return window.addEventListener("mousemove",n),window.addEventListener("mouseup",e),function(){window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",e)}},[ln]),Object(r.useEffect)(function(){function n(n){if(mn){var e=Y.x+n.clientX-en,t=Y.y+n.clientY-tn,r=Object(m.a)({},Y,{x:e,y:t});P(r),function(n){xn.apply(this,arguments)}(r)}}function e(){if(mn){pn(!1);var n=Q.getDataImg();n&&wn(n)}}return window.addEventListener("mousemove",n),window.addEventListener("mouseup",e),function(){window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",e)}},[mn]),o.a.createElement(o.a.Fragment,null,o.a.createElement(G,{style:hn,onMouseDown:function(n){en=n.clientX,tn=n.clientY,B(Object(m.a)({},Y)),pn(!0)}}),o.a.createElement(Z,{ref:n,style:gn,onMouseDown:function(e){if("mode_window"===R)return sn(!0),P({x:e.clientX,y:e.clientY,w:3,h:3}),void W(!1);c(!0),Q.stopUpdate();var t=nn(v);b(t);var r="mode_draw"===R?x:V;!function(n){var e=n.canvas,t=n.x,r=n.y,o=n.color,a=void 0===o?"#000":o,i=n.size,c=void 0===i?10:i,u=e.getContext("2d");u.beginPath(),u.strokeStyle=a,u.lineWidth=c,u.lineJoin="round",u.lineCap="round",u.moveTo(t,r),u.lineTo(t,r),u.stroke()}({canvas:n.current,x:e.clientX,y:e.clientY,color:r,size:t})},onMouseMove:function(e){if("mode_window"===R)return!1;var t=e.clientX,r=e.clientY;if(i){var o=nn(v);v!==o&&b(o);var a="mode_draw"===R?x:V;!function(n){var e=n.canvas,t=n.x,r=n.y,o=n.color,a=n.size,i=e.getContext("2d");i.strokeStyle=o,i.lineWidth=a,i.lineJoin="round",i.lineCap="round",i.lineTo(t,r),i.stroke()}({canvas:n.current,x:t,y:r,color:a,size:o})}else Q.setCursor(t,r)},onMouseUp:function(){if("mode_window"===R)return!1;var e=n.current.toDataURL();wn(e),Q.setDataImg(e),Q.startUpdate(),c(!1)},onMouseLeave:function(){Q.setCursor(-100,-100)}}),o.a.createElement(C,{onClickClearBtn:function(){$({canvas:n.current});var e=n.current.toDataURL();wn(e),Q.setDataImg(e)},onClickUndoBtn:function(){if(bn){if(0===z){$({canvas:n.current});var e=n.current.toDataURL();Q.setDataImg(e)}else{var t=O[z-1];Q.setDataImg(t)}I(z-1),W(!1)}},onClickRedoBtn:function(){if(vn){var n=O[z+1];Q.setDataImg(n),I(z+1)}},onClickSaveBtn:function(){var t=n.current.toDataURL("image/png"),r=e.current;r.href=t,r.download="canvas-"+(new Date).toISOString()+".png",r.click()},canRedo:vn,canUndo:bn}),o.a.createElement(q,{size:v,setSize:b,onCheckSize:function(){var n=nn(v);b(n)},color:x,setColor:w,mode:R,setMode:U}),o.a.createElement("a",{href:"#?file",style:{display:"none"},hidden:!0,ref:e},"Download Link"))};function ln(){var n=Object(c.a)(["\n  *, *::before, *::after {\n    box-sizing: border-box;\n  }\n  html, body, #root {\n    height: 100%;\n    margin: 0;\n    padding: 0;\n  }\n  body, input {\n    font-family: 'Open Sans', sans-serif;\n    font-weight: bold;\n  }\n  body {\n    overflow: hidden;\n    user-select: none;\n  }\n"]);return ln=function(){return n},n}var sn=Object(u.a)(ln());var dn=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(sn,null),o.a.createElement(un,null))};i.a.render(o.a.createElement(dn,null),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.de558467.chunk.js.map