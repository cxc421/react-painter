(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(n,e,t){n.exports=t(32)},32:function(n,e,t){"use strict";t.r(e);var r=t(1),o=t.n(r),a=t(6),i=t.n(a),c=t(2),u=t(3),l=t(12),s=t(4),d=t(8),f=t.n(d),m=t(14),p=t(11),v=t(5);function b(){var n=Object(c.a)(["\n    color: grey;\n    pointer-events: none;\n  "]);return b=function(){return n},n}function g(){var n=Object(c.a)(["\n  /* background: skyblue; */\n  padding: 2px 0;\n  padding-right: 8px;\n  padding-left: 2px;\n  border-radius: 10px;\n  cursor: pointer;\n  transition: background 300ms;\n  &:hover {\n    background: #e8e8e8;\n  }\n\n  > * {\n    vertical-align: middle;\n  }\n  .btn-text {\n    margin-left: 4px;\n  }\n\n  ",";\n"]);return g=function(){return n},n}function h(){var n=Object(c.a)(["\n  display: inline-block;\n  /* background: pink; */\n  padding: 14px 0;\n  margin: 0 14px;\n"]);return h=function(){return n},n}var x=u.c.div(h()),w=u.c.div(g(),function(n){return n.disabled&&Object(u.b)(b())});var k=o.a.memo(function(n){var e=n.Icon,t=void 0===e?function(){return null}:e,r=n.text,a=void 0===r?"":r,i=n.onClick,c=void 0===i?function(n){return n}:i,u=n.disabled,l=void 0!==u&&u;return o.a.createElement(x,null,o.a.createElement(w,{onClick:c,disabled:l},o.a.createElement(t,{size:48}),o.a.createElement("span",{className:"btn-text"},a)))});function E(){var n=Object(c.a)(["\n  width: 56px;\n  height: 56px;\n  position: absolute;\n  z-index: -1;\n  left: 50%;\n  margin-left: -28px;\n  bottom: -28px;\n  background: white;\n  border-radius: 100%;\n  text-align: center;\n  line-height: 56px;\n  cursor: pointer;\n\n  > * {\n    margin-bottom: -20px;\n    transform: rotate(","deg);\n    transition: transform 600ms;\n  }\n"]);return E=function(){return n},n}function O(){var n=Object(c.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  background: white;\n  text-align: center;\n  transform: translateY(",");\n  transition: 600ms;\n\n  > * {\n    vertical-align: middle;\n  }\n"]);return O=function(){return n},n}var y=u.c.div(O(),function(n){return n.open?"0":"-100%"}),j=u.c.div(E(),function(n){return n.open?"0":"-180"});var C=function(n){var e=n.onClickClearBtn,t=void 0===e?function(n){return n}:e,a=n.onClickRedoBtn,i=n.onClickUndoBtn,c=n.onClickSaveBtn,u=n.canRedo,l=void 0!==u&&u,d=n.canUndo,f=void 0!==d&&d,m=Object(r.useState)(!0),p=Object(s.a)(m,2),b=p[0],g=p[1];return o.a.createElement(y,{open:b},o.a.createElement(k,{Icon:v.h,text:"SAVE",onClick:c}),o.a.createElement(k,{Icon:v.d,text:"CLEAR ALL",onClick:t}),o.a.createElement(k,{Icon:v.i,text:"UNDO",onClick:i,disabled:!f}),o.a.createElement(k,{Icon:v.g,text:"REDO",onClick:a,disabled:!l}),o.a.createElement(j,{open:b,onClick:function(){return g(!b)}},o.a.createElement(v.f,{size:24})))};function S(){var n=Object(c.a)(["\n  /* background: pink; */\n  display: inline-flex;\n  align-items: center;\n\n  input {\n    margin: 0 8px 0 16px;\n    border: none;\n    outline: none;\n    height: 100%;\n    text-align: center;\n    font-size: 20px;\n    width: 74px;\n    background: #e8e8e8;\n    border-radius: 24px;\n  }\n\n  span {\n    font-size: 20px;\n  }\n"]);return S=function(){return n},n}var I=u.c.div(S());var z=o.a.memo(function(n){var e=n.size,t=n.setSize,a=n.onCheckSize,i=Object(r.useRef)(null);return Object(r.useEffect)(function(){var n=i.current;n.selectionStart=n.selectionEnd=n.value.length}),o.a.createElement(I,null,o.a.createElement("span",null,"SIZE:"),o.a.createElement("input",{type:"text",ref:i,value:e,onChange:function(n){return t(n.target.value)},onBlur:a,onKeyPress:function(n){"Enter"===n.key&&a()},onKeyDown:function(n){if(!isNaN(e))return 38===n.keyCode?t(Number(e)+1):40===n.keyCode?t(Number(e)-1):void 0}}),o.a.createElement("span",null,"px"))});function D(){var n=Object(c.a)(["\n  width: 48px;\n  height: 48px;\n  border: solid 2px;\n  background: ",";\n  border-color: ",";\n  border-radius: 50%;\n  margin-right: 8px;\n  &:last-child {\n    margin-right: 0;\n  }\n  text-align: center;\n  line-height: 48px;\n  color: ",";\n  cursor: pointer;\n"]);return D=function(){return n},n}var L=u.c.div(D(),function(n){return n.color},function(n){var e=n.color;return"#fff"===e||"#ffffff"===e||"white"===e?"#000":e},function(n){var e=n.color;return"#000"===e||"#000000"===e||"black"===e?"#fff":"#000"});var R=function(n){var e=n.select,t=void 0!==e&&e,r=n.color,a=void 0===r?"#fff":r,i=n.onClick,c=void 0===i?function(n){return n}:i;return o.a.createElement(L,{color:a,onClick:c},t&&o.a.createElement(v.c,null))};function U(){var n=Object(c.a)(["\n  /* background: pink; */\n  display: inline-flex;\n  align-items: center;\n  font-size: 20px;\n  span {\n    margin-right: 16px;\n  }\n"]);return U=function(){return n},n}var M=u.c.div(U());var N=function(n){var e=n.color,t=n.setColor;return o.a.createElement(M,null,o.a.createElement("span",null,"COLOR:"),["#ffffff","#000000","#9BFFCD","#00CC99","#01936F"].map(function(n,r){return o.a.createElement(R,{select:n===e,color:n,key:r,onClick:function(){return t(n)}})}))};function _(){var n=Object(c.a)(["\n  position: fixed;\n  z-index: 0;\n  width: 56px;\n  height: 56px;\n  left: 50%;\n  margin-left: -28px;\n\n  bottom: ",";\n  @media (max-width: 888px) {\n    bottom: ",";\n  }\n\n  margin-bottom: -28px;\n  background: white;\n  border-radius: 100%;\n  text-align: center;\n  line-height: 56px;\n  cursor: pointer;\n  transition: all 600ms;\n  box-shadow: 0px 4px 16px rgba(0, 0, 0, 0.16);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  > * {\n    transition: all 600ms;\n    line-height: 56px;\n  }\n\n  .arrow-down-icon {\n    position: relative;\n    top: ",";\n    opacity: ",";\n  }\n\n  .brush-icon {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    opacity: ",";\n  }\n"]);return _=function(){return n},n}var B=u.c.div(_(),function(n){return n.open?"120px":"68px"},function(n){return n.open?"241px":"68px"},function(n){return n.open?"-10px":"0px"},function(n){return n.open?"1":"0"},function(n){return n.open?"0":"1"}),F=function(n){var e=n.onClick,t=void 0===e?function(n){return n}:e,r=n.open,a=void 0===r||r;return o.a.createElement(B,{onClick:t,open:a},o.a.createElement(v.e,{size:24,className:"arrow-down-icon"}),o.a.createElement(v.b,{size:24,className:"brush-icon"}))},A=t(17);function Y(){var n=Object(c.a)(["\n  display: inline-flex;\n  /* background: grey; */\n  height: auto !important;\n  white-space: nowrap;\n\n  > * {\n    margin-left: 10px;\n    padding: 2px;\n    border-radius: 10px;\n    &:first-child {\n      margin-left: 0;\n    }\n\n    &:hover {\n      background: #e8e8e8;\n    }\n\n    /* background: ","; */\n    cursor: pointer;\n    &.select {\n      background: lightgray;\n    }\n  }\n"]);return Y=function(){return n},n}var P=u.c.div(Y(),function(n){return n.select?"grey":"pink"}),W=function(n){var e=n.mode,t=n.setMode;return o.a.createElement(P,null,[{Icon:v.b,modeName:"mode_draw"},{Icon:A.a,modeName:"mode_eraser"},{Icon:v.a,modeName:"mode_window"}].map(function(n){var r=n.Icon,a=n.modeName;return o.a.createElement(r,{key:a,size:52,className:"".concat(a===e?"select":""),onClick:function(){return t(a)}})}))};function X(){var n=Object(c.a)(["\n  position: fixed;\n  z-index: 1;\n  bottom: 40px;\n  left: 50%;\n  transform: ",";\n  transition: transform 600ms;\n  background: white;\n  box-shadow: 0px 4px 16px rgba(0, 0, 0, 0.16);\n  border-radius: 50px;\n  padding: 16px 40px;\n  white-space: nowrap;\n\n  > * {\n    height: 48px;\n    vertical-align: middle;\n    &:nth-child(n + 2) {\n      margin-left: 40px;\n    }\n  }\n\n  @media (max-width: 888px) {\n    white-space: pre-wrap;\n    padding: 16px 24px;\n\n    > * {\n      display: flex;\n\n      &:nth-child(n + 2) {\n        margin-left: 0px;\n        margin-top: 10px;\n      }\n    }\n  }\n"]);return X=function(){return n},n}var J=u.c.div(X(),function(n){return n.open?"translate(-50%, 0)":"translate(-50%, calc(100% + 40px))"});var T=function(n){var e=n.size,t=n.setSize,a=n.onCheckSize,i=n.color,c=n.setColor,u=n.mode,l=n.setMode,d=Object(r.useState)(!0),f=Object(s.a)(d,2),m=f[0],p=f[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(J,{open:m},o.a.createElement(W,{mode:u,setMode:l}),o.a.createElement(z,{size:e,onCheckSize:a,setSize:t}),o.a.createElement(N,{color:i,setColor:c})),o.a.createElement(F,{open:m,onClick:function(){return p(!m)}}))};function q(){var n=Object(c.a)(["\n  border: dashed 3px blue;\n  position: absolute;\n  background: rgba(0, 0, 255, 0.1);\n  cursor: move;\n"]);return q=function(){return n},n}function K(){var n=Object(c.a)(["\n  width: 100%;\n  height: 100%;\n  background: #e8e8e8;\n  cursor: none;\n"]);return K=function(){return n},n}var V="#e8e8e8",Z=u.c.canvas(K()),G=u.c.div(q()),H=function(n){return new Promise(function(e,t){var r=new Image;r.src=n,r.onload=function(){e(r)},r.onerror=t})},Q=function(){var n=null,e=null,t=null,r=!0,o="mode_draw",a=-100,i=-100,c="#000",u=10,l=null;function s(){var e=n.getBoundingClientRect(),t=e.width,r=e.height;n.width=t,n.height=r}function d(){return"mode_draw"===o?(e.beginPath(),e.strokeStyle=c,e.lineWidth=u,e.lineJoin="round",e.lineCap="round",e.moveTo(a,i),e.lineTo(a,i),void e.stroke()):"mode_eraser"===o?(e.beginPath(),e.arc(a,i,u/2,0,2*Math.PI),e.fillStyle="whitesmoke",e.fill(),void e.closePath()):void 0}function f(){if(!r)return cancelAnimationFrame(l),void(l=requestAnimationFrame(f));if(t){var o=new Image;o.src=t,o.onload=function(){s(),e.drawImage(o,0,0),d(),cancelAnimationFrame(l),l=requestAnimationFrame(f)}}else s(),e.fillStyle=V,e.fillRect(0,0,n.width,n.height),d(),cancelAnimationFrame(l),l=requestAnimationFrame(f)}return{init:function(t){e=(n=t).getContext("2d"),f()},setCursor:function(n,e){a=n,i=e},setSpec:function(n){c=n.color,u=n.size,o=n.mode},setDataImg:function(n){t=n},getDataImg:function(){return t},stopUpdate:function(){r=!1},startUpdate:function(){r=!0}}}();function $(n){var e=n.canvas,t=e.getContext("2d");t.fillStyle=V,t.fillRect(0,0,e.width,e.height)}var nn=function(){var n=null;return function(e){if(null===n)return n=e;var t=parseInt(e,10);return isNaN(t)?n:n=t<1?1:t}}(),en=function(){var n=document.createElement("canvas"),e=document.createElement("canvas"),t=n.getContext("2d"),r=e.getContext("2d"),o=!1,a=null;function i(){if(o=!1,a){var n=a;a=null,c.apply(void 0,Object(p.a)(n))}}function c(n){return u.apply(this,arguments)}function u(){return(u=Object(m.a)(f.a.mark(function a(c){var u,l,s,d,m,p,v;return f.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(u=c.dataImg,l=c.oldWin,s=c.newWin,d=c.canvas,o=!0,u){a.next=4;break}return a.abrupt("return",i());case 4:return a.next=6,H(u);case 6:return m=a.sent,n.width=d.width,n.height=d.height,t.drawImage(m,0,0),p=t.getImageData(l.x,l.y,l.w,l.h),e.width=l.w,e.height=l.h,r.putImageData(p,0,0),a.next=16,H(e.toDataURL());case 16:return v=a.sent,t.clearRect(l.x,l.y,l.w,l.h),t.drawImage(v,0,0,l.w,l.h,s.x,s.y,s.w,s.h),Q.setDataImg(n.toDataURL()),a.abrupt("return",i());case 21:case"end":return a.stop()}},a,this)}))).apply(this,arguments)}return function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];o?(a&&console.log("neglect"),a=e):c.apply(void 0,e)}}(),tn=0,rn=0,on=function(){var n=Object(r.useRef)(null),e=Object(r.useRef)(null),t=Object(r.useState)(!1),a=Object(s.a)(t,2),i=a[0],c=a[1],u=Object(r.useState)(20),d=Object(s.a)(u,2),f=d[0],m=d[1],v=Object(r.useState)("#000000"),b=Object(s.a)(v,2),g=b[0],h=b[1],x=Object(r.useState)([]),w=Object(s.a)(x,2),k=w[0],E=w[1],O=Object(r.useState)(-1),y=Object(s.a)(O,2),j=y[0],S=y[1],I=Object(r.useState)("mode_draw"),z=Object(s.a)(I,2),D=z[0],L=z[1],R=Object(r.useState)(null),U=Object(s.a)(R,2),M=U[0],N=U[1],_=Object(r.useState)({x:0,y:0,h:0,w:0}),B=Object(s.a)(_,2),F=B[0],A=B[1],Y=Object(r.useState)(!1),P=Object(s.a)(Y,2),W=P[0],X=P[1],J=Object(r.useState)(!1),q=Object(s.a)(J,2),K=q[0],H=q[1],on=Object(r.useState)(!1),an=Object(s.a)(on,2),cn=an[0],un=an[1],ln=k.length>j+1,sn=j>-1,dn={cursor:"mode_window"===D?"crosshair":"none"},fn={left:F.x,top:F.y,width:F.w,height:F.h,display:W?"block":"none"};function mn(n){var e=k.slice(0,j+1);E([].concat(Object(p.a)(e),[n])),S(j+1)}return Object(r.useEffect)(function(){Q.setSpec({size:f,color:g,mode:D}),Q.init(n.current)},[]),Object(r.useEffect)(function(){Q.setSpec({size:f,color:g,mode:D})},[f,g,D]),Object(r.useEffect)(function(){X(!1)},[D]),Object(r.useEffect)(function(){function n(n){if(K){var e=Math.min(F.x,n.clientX),t=Math.min(F.y,n.clientY),r=Math.abs(F.x-n.clientX),o=Math.abs(F.y-n.clientY);A({x:e,y:t,w:r,h:o}),X(!0)}}function e(){K&&H(!1)}return window.addEventListener("mousemove",n),window.addEventListener("mouseup",e),function(){window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",e)}},[K]),Object(r.useEffect)(function(){function e(e){if(cn){var t=F.x+e.clientX-tn,r=F.y+e.clientY-rn,o=Object(l.a)({},F,{x:t,y:r});A(o),en({newWin:o,oldWin:M,canvas:n.current,dataImg:k[j]})}}function t(){if(cn){un(!1);var n=Q.getDataImg();n&&mn(n)}}return window.addEventListener("mousemove",e),window.addEventListener("mouseup",t),function(){window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",t)}},[cn]),o.a.createElement(o.a.Fragment,null,o.a.createElement(G,{style:fn,onMouseDown:function(n){tn=n.clientX,rn=n.clientY,N(Object(l.a)({},F)),un(!0)}}),o.a.createElement(Z,{ref:n,style:dn,onMouseDown:function(e){if("mode_window"===D)return H(!0),A({x:e.clientX,y:e.clientY,w:3,h:3}),void X(!1);c(!0),Q.stopUpdate();var t=nn(f);m(t);var r="mode_draw"===D?g:V;!function(n){var e=n.canvas,t=n.x,r=n.y,o=n.color,a=void 0===o?"#000":o,i=n.size,c=void 0===i?10:i,u=e.getContext("2d");u.beginPath(),u.strokeStyle=a,u.lineWidth=c,u.lineJoin="round",u.lineCap="round",u.moveTo(t,r),u.lineTo(t,r),u.stroke()}({canvas:n.current,x:e.clientX,y:e.clientY,color:r,size:t})},onMouseMove:function(e){if("mode_window"===D)return!1;var t=e.clientX,r=e.clientY;if(i){var o=nn(f);f!==o&&m(o);var a="mode_draw"===D?g:V;!function(n){var e=n.canvas,t=n.x,r=n.y,o=n.color,a=n.size,i=e.getContext("2d");i.strokeStyle=o,i.lineWidth=a,i.lineJoin="round",i.lineCap="round",i.lineTo(t,r),i.stroke()}({canvas:n.current,x:t,y:r,color:a,size:o})}else Q.setCursor(t,r)},onMouseUp:function(){if("mode_window"===D)return!1;var e=n.current.toDataURL();mn(e),Q.setDataImg(e),Q.startUpdate(),c(!1)},onMouseLeave:function(){Q.setCursor(-100,-100)}}),o.a.createElement(C,{onClickClearBtn:function(){$({canvas:n.current});var e=n.current.toDataURL();mn(e),Q.setDataImg(e),X(!1)},onClickUndoBtn:function(){if(sn){if(0===j){$({canvas:n.current});var e=n.current.toDataURL();Q.setDataImg(e)}else{var t=k[j-1];Q.setDataImg(t)}S(j-1),X(!1)}},onClickRedoBtn:function(){if(ln){var n=k[j+1];Q.setDataImg(n),S(j+1)}},onClickSaveBtn:function(){var t=n.current.toDataURL("image/png"),r=e.current;r.href=t,r.download="canvas-"+(new Date).toISOString()+".png",r.click()},canRedo:ln,canUndo:sn}),o.a.createElement(T,{size:f,setSize:m,onCheckSize:function(){var n=nn(f);m(n)},color:g,setColor:h,mode:D,setMode:L}),o.a.createElement("a",{href:"#?file",style:{display:"none"},hidden:!0,ref:e},"Download Link"))};function an(){var n=Object(c.a)(["\n  *, *::before, *::after {\n    box-sizing: border-box;\n  }\n  html, body, #root {\n    height: 100%;\n    margin: 0;\n    padding: 0;\n  }\n  body, input {\n    font-family: 'Open Sans', sans-serif;\n    font-weight: bold;\n  }\n  body {\n    overflow: hidden;\n    user-select: none;\n  }\n"]);return an=function(){return n},n}var cn=Object(u.a)(an());var un=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(cn,null),o.a.createElement(on,null))};i.a.render(o.a.createElement(un,null),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.61281a88.chunk.js.map